<?php

class activity_model extends CI_Model{
    function __construct(){
        parent::__construct();
        $this->load->database();
        $this->load->helper('base_helper');
    }

    /**
     * 新增活动
     * @author ca007
     * @param timestamp $act_start_date
     * @param timestamp $act_end_date
     * @param timestamp $sign_end_date
     * @param string $address
     * @param stirng $title
     * @param string $detail
     * @param string $pic
     * @param int $type
     * @param int state
     * @param int $total
     */
    function addActivity($act_start_date,
                         $act_end_date,
                         $sign_end_date,
                         $address,
                         $title,
                         $detail,
                         $pic,
                         $type,
                         $state,
                         $total,
                         $group_list) {
        $actPermission = $this->permission_model->checkPermission(MANAGE_ACTIVITY);
        $newAct = array(
            'act_start_date'=>$act_start_date,
            'act_end_date'=>$act_end_date,
            'sign_end_date'=>$sign_end_date,
            'address'=>$address,
            'title'=>$title,
            'detail'=>$detail,
            'userID'=>$_SESSION['userID'],
            'pic'=>$pic,
            'type'=>$type,
            'state'=>$state,
            'total'=>$total);
        $this->db->insert('activity_list', $newAct);
        $actID = $this->db->insert_id();
        return array_merge(errorMessage(1, '活动添加成功'),array('ID'=>$actID));
    }
}

?>
